
## 1 steer
```bash
python steering_928.py \
	 --model_name llama3.1_8B \
	 --layer 14 \
	 --save_path checkpoints/llama3.1_8B_L14_mat_steer_1206.pt \
	 --batch_size 96 \
	 --epochs 10 \
	 --lr 0.001 \
	 --sigma 1.0 \
	 --lambda_mmd 1.0 \
	 --lambda_sparse 0.9 \
	 --lambda_ortho 0.1 \
	 --lambda_pos 0.9
```

## 2 评估
### 2.1 默认评估truthfuqa
```bash
python my_run_mat_eval.py \
 --model_name llama3.1_8B \
 --checkpoint checkpoints/llama3.1_8B_L14_mat_steer_1206.pt \
 --layer 14 \
 --instruction_prompt default \
 --baseline
```


### 2.2 toxigen

#### (1) 测试运行

```bash
python my_run_mat_eval.py \
    --checkpoint ./checkpoints/llama3.1_8B_L14_mat_steer_1206.pt \
    --dataset toxigen \
    --seed 42\
    --model_name llama3.1_8B \
    --baseline\
    --force_recompute\
    --test-run
```

#### (2)正常运行

```bash
# 评估 toxigen 数据集（干预模型）
python my_run_mat_eval.py \
    --checkpoint ./checkpoints/llama3.1_8B_L14_mat_steer_1206.pt \
    --dataset toxigen \
    --seed 42\
    --model_name llama3.1_8B \
    --baseline\
    --force_recompute

```

#### (3)添加tmp
```
# -加tmp
python my_run_mat_eval.py     --checkpoint ./checkpoints/llama3.1_8B_L14_mat_steer_1206.pt    --dataset toxigen     --model_name llama3.1_8B  --seed 42   --baseline    --force_recompute --tmp 1114-1808-v1
```

### 2.3 bbq
#### (1) 测试运行
```bash
python my_run_mat_eval.py \
    --checkpoint ./checkpoints/llama3.1_8B_L14_mat_steer_1206.pt \
    --dataset bbq \
    --model_name llama3.1_8B \
    --baseline \
    --seed 42 \
    --force_recompute\
    --test-run
```
#### (2) 正常运行
```bash
# 评估 bbq 数据集（干预模型）
python my_run_mat_eval.py \
    --checkpoint ./checkpoints/llama3.1_8B_L14_mat_steer_1206.pt \
    --dataset bbq \
    --model_name llama3.1_8B \
    --baseline \
    --seed 42 \
    --force_recompute
```
#### (3) 添加tmp
```
# -加tmp
python my_run_mat_eval.py     --checkpoint ./checkpoints/llama3.1_8B_L14_mat_steer_1206.pt     --dataset bbq     --model_name llama3.1_8B  --seed 42   --baseline    --force_recompute --tmp 1114-1808-v1 
```

```bash
python /root/zjj/MAT-Steer/validation/run_seeded_evals.py --checkpoint /root/zjj/MAT-Steer/validation/checkpoints/llama3.1_8B_L14_mat_steer_1206.pt --model_name llama3.1_8B --device cuda:1 --multiplier 1.0 --seeds 42 --baseline --force_recompute 
```
