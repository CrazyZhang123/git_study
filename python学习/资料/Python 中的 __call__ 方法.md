最后更新时间：2025年7月12日

Python 拥有一系列内置方法，`__call__` 便是其中之一。该方法使 Python 开发者能够编写“实例可像函数一样调用”的类。当类中定义了 `__call__` 方法后，调用对象（如 `obj(arg1, arg2)`）会自动触发 `obj.__call__(arg1, arg2)`。这种特性让对象具备了函数的行为，从而实现更灵活、可复用的代码。

## 语法
```python
class Example:
    def __init__(self):
        # 初始化代码

    # 定义 __call__ 方法
    def __call__(self):
        # 调用时执行的代码
```

`def __call__(self):` 定义的方法可通过 `Example` 类的实例直接以函数形式调用。


## __call__ 方法示例
下面通过几个代码示例来理解 `__call__` 在 Python 中的具体用法。

### 示例 1：基础用法
本示例定义一个类并在其中创建 `__call__` 方法，然后通过类的对象调用该方法：

```python
class Gfg:
    def __init__(self):
        print("实例已创建")
    
    # 定义 __call__ 方法
    def __call__(self):
        print("实例通过特殊方法被调用")

# 创建实例
e = Gfg()

# 触发 __call__ 方法
e()
```

**输出结果**：
```
实例已创建
实例通过特殊方法被调用
```

**解释**：
- `__init__` 方法在对象创建时执行（初始化操作）；
- 当以 `e()` 形式调用对象时，`__call__` 方法被触发；
- 这一特性使 `Gfg` 类的实例成为“可调用对象”。


### 示例 2：传递参数
下面演示如何为 `__call__` 方法传递参数：

```python
class Prod:
    def __init__(self):
        print("实例已创建")

    # 定义带参数的 __call__ 方法
    def __call__(self, a, b):
        print(a * b)

# 创建实例
a = Prod()

# 调用 __call__ 方法并传参
a(10, 20)
```

**输出结果**：
```
实例已创建
200
```

**解释**：
- `__call__` 方法可接收参数（如示例中的 `a` 和 `b`），使实例能像函数一样处理输入；
- 这种特性适用于创建可参数化的灵活对象，使其具备函数的处理能力。


### 示例 3：实现计数器功能
利用 `__call__` 方法创建一个计数器对象：

```python
class C:
    def __init__(self):
        self.count = 0

    def __call__(self):
        self.count += 1
        return self.count

count = C()
print(count()) 
print(count())  
print(count())
```

**输出结果**：
```
1
2
3
```

**解释**：
- 计数器对象会跟踪自身被调用的次数；
- 这种用法在限流控制、缓存管理或 API 调用统计等场景中非常实用。


### 关键术语补充
- **可调用对象（Callable Object）**：指可以像函数一样被调用的对象。在 Python 中，函数、类、以及定义了 `__call__` 方法的类实例，都属于可调用对象。
- **内置方法（Built-in Method）**：Python 解释器原生支持的方法，以双下划线 `__` 开头和结尾（又称“魔法方法”），用于实现类的特殊行为（如 `__init__` 初始化、`__call__` 调用等）。