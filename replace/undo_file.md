### 2.1 问题表述
设语言模型 $M$ 具有 $L$ 个Transformer层，处理输入序列 $P$，该序列包含 $n$ 个token，即 $P = (t_1, \dots, t_n)$。对于第 $l$ 层中位置 $i$ 处的token $t_i$，其残差流激活表示为 $a_l^i \in \mathbb{R}^d$，其中 $d$ 是隐藏维度。在本研究中，我们关注最后一个token的激活（即第 $l$ 层中对应于 $t_n$ 的 $a_l^n$，并将其简化为 $a_l$。我们的目标是通过动态调整 $a_l$，在推理过程中缓解模型 $M$ 在下一token预测 $t_{n+1}$ 中的偏差。

### 2.2 假设：偏差的线性可分性
为了验证与公平性相关的特征具有线性表示的假设，我们进行了两项探索性实验。

**逐层可分性分析**  
我们训练线性分类器 $C_l$，以区分所有层中的有偏和无偏激活 $a_l$。如图2所示，验证准确率在中间层达到峰值（例如，在Mistral-7B的第14层超过90%），并在所有测试的大型语言模型（LLM）的最后一层保持稳定，准确率高于87%。这表明，从中间层开始，公平性概念变得线性可分。

**几何子空间可视化**  
为了进一步验证可分性，我们将Vicuna-13B第14层的激活通过主成分分析（PCA）投影到二维空间，如图3所示。投影结果显示，有偏（红色）和无偏（绿色）激活之间存在明显的分离。去偏引导向量（DSV）通过计算两个簇的均值差异得到，有效地连接了这些子空间。这种几何特性证实，可以通过向量空间干预来实现偏差缓解。

**图3**：Vicuna-13B第14层有偏和无偏激活的二维PCA可视化。箭头表示有偏和无偏激活之间的均值差异，对应于去偏引导向量（DSV）。